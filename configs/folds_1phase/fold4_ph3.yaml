global_batch_size: &global_batch_size 8
global_num_workers: &global_num_workers 16

dataset:
  name: "multimodal_dataset"
  params:
    root_dir: "data/Duke-Breast-Cancer-MRI"
    clinical_data_path: "data/Clinical_and_Other_Features.xlsx"
    clinical_label: ['Recurrence', 'Recurrence event(s)', '{0 = no, 1 = yes}']
    required_phases: ["Ph3"]
    clinical_features_filter_dict:
      0: [ "Follow Up", "US features",] #"Tumor Characteristics"
    clinical_features_exclude_columns:
      - ['Recurrence', 'Days to local recurrence (from the date of diagnosis)', '']
      - ['Recurrence', 'Days to distant recurrence(from the date of diagnosis)', '']
      - ['Tumor Characteristics', 'Staging(Tumor Size)# [T]', '']
      - ['Mammography Characteristics', 'Tumor Size (cm)', '']
      - ['MRI Technical Information', 'Image Position of Patient', '']
      - ['Tumor Characteristics', 'Position', 'Position (every bx positive for invasive cancer)(used during annotation)']
    max_workers: 8

  indices:
    train: [403,910,533,252,277,25,619,179,808,719,849,321,912,647,84,54,687,397,133,444,248,659,483,350,591,108,848,102,1,239,220,445,509,176,8,172,374,340,422,297,707,369,281,544,346,475,414,173,161,498,501,386,390,506,208,723,739,657,236,478,302,287,235,244,772,665,57,162,799,330,29,74,720,106,635,868,79,401,505,128,823,610,842,363,276,735,654,611,562,853,337,66,798,557,678,699,408,724,831,315,783,667,289,575,132,450,175,48,323,696,565,670,299,301,222,217,58,584,264,548,612,37,606,437,404,131,503,564,830,112,378,805,536,741,729,193,210,89,520,793,199,78,476,646,674,734,204,847,119,698,833,782,197,764,150,686,889,664,802,850,788,364,901,517,585,462,338,510,425,883,552,471,105,513,296,341,545,429,454,555,76,9,130,762,752,410,171,263,6,101,250,435,887,292,15,122,834,736,258,537,268,497,911,280,83,80,549,396,819,726,753,388,756,146,423,620,207,878,142,559,336,317,344,634,704,656,300,226,874,718,804,467,229,680,919,135,894,260,254,876,163,316,167,113,87,22,570,155,844,703,651,358,572,824,215,580,151,116,622,104,760,779,845,41,468,415,382,399,421,461,206,223,492,30,194,918,377,491,45,156,26,902,697,400,758,213,314,913,354,655,159,21,439,345,95,7,237,613,34,201,247,174,877,625,837,362,897,67,417,882,603,757,797,375,32,774,867,371,96,669,319,380,784,864,818,53,196,456,566,605,165,100,137,668,463,356,178,526,627,907,12,494,582,126,309,136,13,360,908,607,261,692,780,892,875,688,673,249,200,511,282,751,870,427,675,872,402,88,240,352,27,339,777,583,329,765,895,737,144,269,154,884,42,94,428,766,705,242,768,747,770,538,677,52,759,367,440,721,209,502,618,148,140,186,500,485,685,230,644,906,577,840,266,713,77,44,904,372,328,676,712,298,405,295,846,327,28,900,504,170,351,202,86,68,451,62,822,679,198,466,722,306,689,368,855,343,863,806,275,257,896,604,542,733,663,745,921,543,881,879,683,662,811,387,578,527,51,218,486,324,744,746,852,442,347,546,820,3,922,742,631,816,856,666,807,702,278,594,63,810,149,482,366,40,432,56,357,859,595,123,915,33,273,331,35,310,598,608,59,569,716,590,851,714,825,153,447,290,556,633,672,398,221,832,617,474,14,50,829,854,470,90,253,803,801,203,495,293,394,507,690,125,411,624,185,392,660,711,710,184,169,547,71,629,754,888,332,529,190,231,49,376,800,616,891,648,413,458,384,361,11,769,532,682,160,335,141,600,212,861,72]
    val: [318,885,47,424,189,601,70,241,195,238,755,725,623,493,4,115,430,490,393,886,728,473,749,283,917,288,85,409,743,602,531,18,795,568,64,645,333,438,359,576,267,796,457,778,312,322,139,60,251,508,512,19,499,81,880,469,416,303,521,262,593,479,862,452,418,286,124,342,183,20,109,775,166,349,587,838,412,481,615,484,143,586,860,563,188,313,98,224,265,320,489,528,827,256,694,554,652,307,643,738,661,436,534,761,255,691,294,291,365,706,873,905,684,168,550,385,164,843,813,709,626,515,121,460,519,588,899,836,599,658,395,407,893,589,890,826,715,191,93,158,92,781,708,551,419]
    test: [920,389,792,523,839,326,177,38,270,540,916,567,621,786,46,541,571,869,192,381,55,353,73,145,370,187,518,480,609,259,787,10,828,693,23,129,420,637,727,695,472,522,91,448,138,99,118,434,640,455,597,561,75,671,821,732,443,17,649,97,379,516,234,147,763,2,488,865,61,433,815,731,464,431,227,274,426,16,228,581,560,630,348,334,271,272,24,858,182,898,814,773,653,216,43,681,791,446,636,771,308,871,453,638,487,205,36,841,243,835,211,406,642,717,114,632,477,641,740,459,152,535,245,748,817,391,383,794,180,650,524,592,530,776,305,909,539,730,750,579,31,107,117,789,525,812,219,304,69,246,914,809,82,903,614,110,441,233,701,857,628,157,790,284,355,285,5,311,225,785,214,496,449,39,558,573,639,553,181,866,111]

  transforms:
    target_size: &target_size [144, 96, 144]
    mode: &mode "trilinear"
    train:
      - name: "ToTensor"

      - name: "Resize"
        params:
          target_size: *target_size
          mode: *mode

    val:  # Transforms for validation set
      - name: "ToTensor"

      - name: "Resize"
        params:
          target_size: *target_size
      - name: "Normalize"

    test:  # Transforms for test set
      - name: "ToTensor"

      - name: "Resize"
        params:
          target_size: *target_size
      - name: "Normalize"

dataloader:
  train:
    batch_size: *global_batch_size
    shuffle: true
    num_workers: *global_num_workers
    pin_memory: false
    drop_last: true

  val:
    batch_size: *global_batch_size
    shuffle: false
    num_workers: *global_num_workers
    pin_memory: false

  test:
    batch_size: *global_batch_size
    shuffle: false
    num_workers: *global_num_workers
    pin_memory: false
